# Railway Environment Variables for QLA Mathematics Platform
# Copy these to Railway's Environment Variables section

# ====================
# RAILWAY AUTO-PROVIDED
# ====================
# DATABASE_URL=postgresql://... (Railway provides this automatically)
# PORT=... (Railway provides this automatically)
# RAILWAY_ENVIRONMENT=production (Railway sets this)

# ====================
# DATABASE CONFIGURATION
# ====================
# IMPORTANT: Set this to 'disable' for Railway's internal networking
PGSSL=disable

# ====================
# ENVIRONMENT
# ====================
NODE_ENV=production

# ====================
# GOOGLE OAUTH (REQUIRED)
# ====================
# Get these from Google Cloud Console:
# 1. Go to https://console.cloud.google.com
# 2. Create/select project
# 3. Enable Google+ API
# 4. Create OAuth 2.0 credentials
# 5. Add your Railway URL to authorized redirect URIs

GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret-from-google

# Replace with your actual Railway app URL:
OAUTH_CALLBACK_URL=https://your-app-name.up.railway.app/auth/google/callback

# ====================
# DOMAIN RESTRICTION
# ====================
# Only allow emails from this domain
ALLOWED_GOOGLE_DOMAIN=qla.qfschools.qa

# ====================
# SESSION & SECURITY (REQUIRED)
# ====================
# Generate a secure random string (minimum 32 characters)
# You can generate one with: openssl rand -hex 32
COOKIE_SECRET=your-very-secure-random-string-at-least-32-characters-long-change-this

# ====================
# USER ROLES (REQUIRED)
# ====================
# Comma-separated list of teacher emails
TEACHER_EMAILS=teacher1@qla.qfschools.qa,teacher2@qla.qfschools.qa,2ed944@qla.qfschools.qa,2hg662@qla.qfschools.qa

# Comma-separated list of admin emails
ADMIN_EMAILS=admin@qla.qfschools.qa,2ed944@qla.qfschools.qa

# ====================
# OPTIONAL FEATURES
# ====================
# Maximum file upload size
MAX_UPLOAD_SIZE=100mb

# Session timeout in milliseconds (7 days default)
SESSION_TIMEOUT=604800000

# CORS allowed origins (comma-separated)
# Leave empty to allow all origins
ALLOWED_ORIGINS=

# ====================
# GOOGLE CLASSROOM INTEGRATION (OPTIONAL)
# ====================
# Only needed if you want Google Classroom sync features
# Service account JSON (paste entire JSON as single line, escaping quotes)
GC_SERVICE_ACCOUNT=

# Admin email to impersonate for API calls
GC_IMPERSONATE_USER=

# API scopes (space-separated)
GC_SCOPES=https://www.googleapis.com/auth/admin.directory.user.readonly https://www.googleapis.com/auth/classroom.rosters.readonly https://www.googleapis.com/auth/classroom.courses.readonly

# ====================
# DEPLOYMENT NOTES FOR RAILWAY
# ====================
# 1. Do NOT set DATABASE_URL - Railway provides this automatically
# 2. Do NOT set PORT - Railway provides this automatically
# 3. MUST set PGSSL=disable for Railway's internal PostgreSQL
# 4. Make sure OAUTH_CALLBACK_URL matches your Railway app URL
# 5. Use strong, unique values for COOKIE_SECRET
# 6. Add teacher/admin emails before deployment
#
# To deploy:
# 1. Push code to GitHub
# 2. Connect Railway to your GitHub repo
# 3. Add these environment variables in Railway dashboard
# 4. Deploy!
#
# Common issues:
# - If OAuth fails: Check OAUTH_CALLBACK_URL matches Railway URL
# - If DB fails: Ensure PGSSL=disable is set
# - If no access: Check TEACHER_EMAILS and ADMIN_EMAILS are set
